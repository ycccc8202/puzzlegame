window.__require=function t(e,o,n){function r(s,c){if(!o[s]){if(!e[s]){var p=s.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!c&&a)return a(p,!0);if(i)return i(p,!0);throw new Error("Cannot find module '"+s+"'")}s=p}var l=o[s]={exports:{}};e[s][0].call(l.exports,function(t){return r(e[s][1][t]||t)},l,l.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({Game:[function(t,e,o){"use strict";cc._RF.push(e,"03c8dDrJTpEG5Wz3IBW8YO2","Game");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./MaskBox"),c=cc._decorator,p=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box_node=null,e.box=null,e.win_label=null,e.random_btn=null,e.size=160,e.w_cell=4,e.h_cell=5,e.map=[],e.boxList=[],e.isGameOver=!1,e.tempNode=null,e}return r(e,t),e.prototype.onLoad=function(){for(var t=0;t<this.w_cell*this.h_cell;t++){var e=cc.instantiate(this.box),o=e.getChildByName("pic");o.x=-this.size*(t%this.w_cell),o.y=this.size*(t/this.w_cell^0),e.getComponent(s.default).true_i=t/this.w_cell^0,e.getComponent(s.default).true_j=t%this.w_cell,console.log(e.getComponent(s.default).true_i,e.getComponent(s.default).true_j),this.boxList.push(e)}for(t=0;t<this.h_cell;t++){this.map[t]=[];for(var n=0;n<this.w_cell;n++)this.map[t][n]={node:null,pos:cc.v2(n*this.size,-t*this.size)}}this.random(),this.box_node.on(cc.Node.EventType.TOUCH_START,this.onTouchHandler,this),this.random_btn.on(cc.Node.EventType.TOUCH_START,this.random,this)},e.prototype.random=function(){this.win_label.string="\u6e38\u620f\u8fdb\u884c\u4e2d...",this.isGameOver=!1;for(var t=0;t<this.h_cell;t++)for(var e=0;e<this.w_cell;e++){var o=this.boxList[t*this.w_cell+e];o&&(this.map[t][e].node=o,o.x=this.map[t][e].pos.x,o.y=this.map[t][e].pos.y,o.getComponent(s.default).i=t,o.getComponent(s.default).j=e,o.parent=this.box_node)}for(this.tempNode=this.map[0][0].node,this.tempNode.active=!1,this.map[0][0].node=null,t=0;t<1e3;t++){var n=this.boxList[1+(19*Math.random()^0)],r=n.getComponent(s.default),i=r.i,c=(e=r.j,this.map[i][e]);this.move(n,c,e-1,i)||this.move(n,c,e+1,i)||this.move(n,c,e,i-1)||this.move(n,c,e,i+1)}},e.prototype.start=function(){},e.prototype.onTouchHandler=function(t){if(this.isGameOver)this.win_label.string="\u606d\u559c\u4f60\u62fc\u5b8c\uff0c\u771f\u662f\u4e2a\u673a\u7075\u9b3c\n\u8bf7\u70b9\u51fb'\u91cd\u65b0\u5f00\u59cb'\u6309\u94ae";else{var e=t.target,o=e.getComponent(s.default);if(o){var n=o.i,r=o.j,i=this.map[n][r];(this.move(e,i,r-1,n)||this.move(e,i,r+1,n)||this.move(e,i,r,n-1)||this.move(e,i,r,n+1))&&this.checkWin()}}},e.prototype.move=function(t,e,o,n){var r=t.getComponent(s.default);if(this.map[n]&&this.map[n][o]&&!this.map[n][o].node){var i=this.map[n][o];return t.x=i.pos.x,t.y=i.pos.y,e.node=null,i.node=r,r.i=n,r.j=o,!0}return!1},e.prototype.checkWin=function(){var t=0;this.boxList.forEach(function(e){e.getComponent(s.default).isTrue()&&t++}),t==this.boxList.length&&(this.tempNode.active=!0,this.win_label.string="\u606d\u559c\u4f60\u62fc\u5b8c\uff0c\u771f\u662f\u4e2a\u673a\u7075\u9b3c",this.isGameOver=!0)},i([a(cc.Node)],e.prototype,"box_node",void 0),i([a(cc.Prefab)],e.prototype,"box",void 0),i([a(cc.Label)],e.prototype,"win_label",void 0),i([a(cc.Node)],e.prototype,"random_btn",void 0),i([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./MaskBox":"MaskBox"}],MaskBox:[function(t,e,o){"use strict";cc._RF.push(e,"20d05SNxtJDx7RoNQcpniWf","MaskBox");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){})},e.prototype.isTrue=function(){return this.true_i==this.i&&this.true_j==this.j},i([c],e)}(cc.Component));o.default=p,cc._RF.pop()},{}]},{},["Game","MaskBox"]);